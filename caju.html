<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<body />
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="./caju.js"></script>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu+Condensed&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.9.55/css/materialdesignicons.min.css" rel="stylesheet">
<style>
  body {
    font-family: 'Ubuntu Condensed', sans-serif;
  }
</style>
<script>
  var leiaute = new Coluna(0, 0, 0)
  leiaute.largura = "100%"
  leiaute.altura = "100%"
  var livro
  leiaute.adicione(livro = new Livro())
  livro.crescimento = 1
  livro.excesso = "rolar"
  livro.margem = 16
  var código
  livro.adicione(código = new Página())
  var globais = {
    "\"\"": ["texto"],
    "caju.saída": ["texto", ""],
    "início": ["nada", 0, [], 1],
    "caju.escreva": ["nada", (globais, comandos) => {
      globais["caju.saída"][1] += comandos[0][0]
    }, [["texto", "valor", ""]]],
    "caju.global": ["nada", (globais, tipo, nome, valor) => {
      globais[nome] = [tipo, valor]
    }, [["tipo", "tipo", "nada"], ["nome", "nome", ""], ["valor", "valor", undefined]]],
  }
  var lógica
  código.adicione(lógica = new Lógica(globais, "início"))
  var navegação
  leiaute.adicione(navegação = new Navegação(["code-json", "eye"]))
  var página_pré_visualizar
  livro.adicione(página_pré_visualizar = new Página())
  página_pré_visualizar.crescimento = 1
  página_pré_visualizar.e.style.alignItems = ""
  var pré_visualizar
  página_pré_visualizar.adicione(pré_visualizar = new VisualizadorHTML())
  pré_visualizar.espessura_da_borda = 3
  navegação.ao_trocar((i) => {
    if (i == 1) {
      var globais = lógica.avalie()
      pré_visualizar.e.contentDocument.open()
      pré_visualizar.e.contentDocument.close()
      pré_visualizar.e.contentDocument.write(globais["caju.saída"][1])
    }
    livro.vá.bind(livro)(i)
  })
  document.body.appendChild(leiaute.e)
  document.body.style.margin = 0
</script>
